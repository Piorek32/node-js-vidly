{"driver":true,"name":"MongoError","level":"error","message":"the update operation document must contain atomic operators.the update operation document must contain atomic operators.","stack":"MongoError: the update operation document must contain atomic operators.\n    at Function.create (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/core/error.js:44:12)\n    at toError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/utils.js:150:22)\n    at checkForAtomicOperators (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/operations/collection_ops.js:69:12)\n    at Collection.updateOne (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/collection.js:700:15)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/lib/roller.js:163:29\n    at tryCatcher (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/util.js:16:23)\n    at Promise._settlePromiseFromHandler (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:512:31)\n    at Promise._settlePromise (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:569:18)\n    at Promise._settlePromise0 (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:614:10)\n    at Promise._settlePromises (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:693:18)\n    at Async._drainQueue (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:133:16)\n    at Async._drainQueues (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:143:10)\n    at Immediate.Async.drainQueues (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:17:14)\n    at runCallback (timers.js:794:20)\n    at tryOnImmediate (timers.js:752:5)\n    at processImmediate [as _immediateCallback] (timers.js:729:5)"}
{"driver":true,"name":"MongoError","level":"error","message":"the update operation document must contain atomic operators.the update operation document must contain atomic operators.","stack":"MongoError: the update operation document must contain atomic operators.\n    at Function.create (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/core/error.js:44:12)\n    at toError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/utils.js:150:22)\n    at checkForAtomicOperators (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/operations/collection_ops.js:69:12)\n    at Collection.updateOne (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongodb/lib/collection.js:700:15)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/lib/roller.js:163:29\n    at tryCatcher (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/util.js:16:23)\n    at Promise._settlePromiseFromHandler (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:512:31)\n    at Promise._settlePromise (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:569:18)\n    at Promise._settlePromise0 (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:614:10)\n    at Promise._settlePromises (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/promise.js:693:18)\n    at Async._drainQueue (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:133:16)\n    at Async._drainQueues (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:143:10)\n    at Immediate.Async.drainQueues (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/fawn/node_modules/bluebird/js/release/async.js:17:14)\n    at runCallback (timers.js:794:20)\n    at tryOnImmediate (timers.js:752:5)\n    at processImmediate [as _immediateCallback] (timers.js:729:5)"}
{"errno":"ECONNRESET","code":"ECONNRESET","syscall":"connect","address":"127.0.0.1","port":36403,"level":"error","message":"Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:36403Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:36403","stack":"Error: connect ECONNRESET 127.0.0.1:36403\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)"}
{"errno":"ECONNRESET","code":"ECONNRESET","syscall":"connect","address":"127.0.0.1","port":39337,"level":"error","message":"Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:39337Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:39337","stack":"Error: connect ECONNRESET 127.0.0.1:39337\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)"}
{"errno":"ECONNRESET","code":"ECONNRESET","syscall":"connect","address":"127.0.0.1","port":40883,"level":"error","message":"Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:40883Caught error after test environment was torn down\n\nconnect ECONNRESET 127.0.0.1:40883","stack":"Error: connect ECONNRESET 127.0.0.1:40883\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)"}
{"level":"error","message":"Caught error after test environment was torn down\n\nsomething faild with genres Caught error after test environment was torn down\n\nsomething faild with genres ","stack":"Error: Caught error after test environment was torn down\n\nsomething faild with genres \n    at request.get.set.expect.expect.expect.res (/home/piotr/Pulpit/vidly-node/node-js-vidly/test/integration/genres.test.js:38:23)\n    at Test.Object.<anonymous>.Test._assertFunction (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/supertest/lib/test.js:283:11)\n    at Test.Object.<anonymous>.Test.assert (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/supertest/lib/test.js:173:18)\n    at localAssert (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/supertest/lib/test.js:131:12)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/supertest/lib/test.js:128:5\n    at Test.Object.<anonymous>.Request.callback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/superagent/lib/node/index.js:716:12)\n    at parser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/superagent/lib/node/index.js:916:18)\n    at IncomingMessage.res.on (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/superagent/lib/node/parsers/json.js:19:7)\n    at emitNone (events.js:111:20)\n    at IncomingMessage.emit (events.js:208:7)\n    at endReadableNT (_stream_readable.js:1064:12)\n    at _combinedTickCallback (internal/process/next_tick.js:139:11)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"message":"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"1\"","kind":"ObjectId","value":"1","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"\n    at new CastError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schema/objectid.js:246:11)\n    at ObjectId.SchemaType.applySetters (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:969:12)\n    at ObjectId.SchemaType._castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1383:15)\n    at ObjectId.SchemaType.castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1373:15)\n    at ObjectId.SchemaType.castForQueryWrapper (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1352:15)\n    at cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Query.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:4644:12)\n    at model.Query.Query._castConditions (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:1842:10)\n    at model.Query.<anonymous> (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:2097:8)\n    at model.Query._wrappedThunk [as _findOne] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at process.nextTick (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/kareem/index.js:369:33)\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"message":"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"1\"","kind":"ObjectId","value":"1","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"\n    at new CastError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schema/objectid.js:246:11)\n    at ObjectId.SchemaType.applySetters (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:969:12)\n    at ObjectId.SchemaType._castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1383:15)\n    at ObjectId.SchemaType.castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1373:15)\n    at ObjectId.SchemaType.castForQueryWrapper (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1352:15)\n    at cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Query.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:4644:12)\n    at model.Query.Query._castConditions (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:1842:10)\n    at model.Query.<anonymous> (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:2097:8)\n    at model.Query._wrappedThunk [as _findOne] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at process.nextTick (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/kareem/index.js:369:33)\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"message":"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"1\"","kind":"ObjectId","value":"1","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"\n    at new CastError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schema/objectid.js:246:11)\n    at ObjectId.SchemaType.applySetters (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:969:12)\n    at ObjectId.SchemaType._castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1383:15)\n    at ObjectId.SchemaType.castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1373:15)\n    at ObjectId.SchemaType.castForQueryWrapper (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1352:15)\n    at cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Query.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:4644:12)\n    at model.Query.Query._castConditions (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:1842:10)\n    at model.Query.<anonymous> (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:2097:8)\n    at model.Query._wrappedThunk [as _findOne] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at process.nextTick (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/kareem/index.js:369:33)\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:5:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:5:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:5:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:6:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:6:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:6:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"res.statut is not a functionres.statut is not a function","stack":"TypeError: res.statut is not a function\n    at module.exports (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/validationObjectId.js:6:20)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at jsonParser (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/types/json.js:110:7)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"message":"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"","name":"CastError","stringValue":"\"1\"","kind":"ObjectId","value":"1","path":"_id","level":"error","stack":"CastError: Cast to ObjectId failed for value \"1\" at path \"_id\" for model \"Genre\"\n    at new CastError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/cast.js:29:11)\n    at ObjectId.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schema/objectid.js:246:11)\n    at ObjectId.SchemaType.applySetters (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:969:12)\n    at ObjectId.SchemaType._castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1383:15)\n    at ObjectId.SchemaType.castForQuery (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1373:15)\n    at ObjectId.SchemaType.castForQueryWrapper (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1352:15)\n    at cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/cast.js:307:32)\n    at model.Query.Query.cast (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:4644:12)\n    at model.Query.Query._castConditions (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:1842:10)\n    at model.Query.<anonymous> (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/query.js:2097:8)\n    at model.Query._wrappedThunk [as _findOne] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\n    at process.nextTick (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/kareem/index.js:369:33)\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"errors":{"name":{"message":"Path `name` (`1234`) is shorter than the minimum allowed length (5).","name":"ValidatorError","properties":{"message":"Path `name` (`1234`) is shorter than the minimum allowed length (5).","type":"minlength","minlength":5,"path":"name","value":"1234"},"kind":"minlength","path":"name","value":"1234"}},"_message":"Genre validation failed","message":"Genre validation failed: name: Path `name` (`1234`) is shorter than the minimum allowed length (5).Genre validation failed: name: Path `name` (`1234`) is shorter than the minimum allowed length (5).","name":"ValidationError","level":"error","stack":"ValidationError: Genre validation failed: name: Path `name` (`1234`) is shorter than the minimum allowed length (5).\n    at new ValidationError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/validation.js:30:11)\n    at model.Object.<anonymous>.Document.invalidate (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2346:32)\n    at p.doValidate.skipSchemaValidators (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2195:17)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1058:9\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:17:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"console.log.og is not a functionconsole.log.og is not a function","stack":"TypeError: console.log.og is not a function\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:7:17)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:317:13)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/index.js:275:10)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/body-parser/lib/read.js:130:5\n    at invokeCallback (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:224:16)\n    at done (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/raw-body/index.js:273:7)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"errors":{"name":{"message":"Path `name` (`jdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","name":"ValidatorError","properties":{"message":"Path `name` (`jdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","type":"maxlength","maxlength":50,"path":"name","value":"jdfgdgdhdrherherherhrherherherherherherherherherherherh"},"kind":"maxlength","path":"name","value":"jdfgdgdhdrherherherhrherherherherherherherherherherherh"}},"_message":"Genre validation failed","message":"Genre validation failed: name: Path `name` (`jdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).Genre validation failed: name: Path `name` (`jdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","name":"ValidationError","level":"error","stack":"ValidationError: Genre validation failed: name: Path `name` (`jdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).\n    at new ValidationError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/validation.js:30:11)\n    at model.Object.<anonymous>.Document.invalidate (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2346:32)\n    at p.doValidate.skipSchemaValidators (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2195:17)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1058:9\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"errors":{"name":{"message":"Path `name` (`jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","name":"ValidatorError","properties":{"message":"Path `name` (`jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","type":"maxlength","maxlength":50,"path":"name","value":"jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh"},"kind":"maxlength","path":"name","value":"jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh"}},"_message":"Genre validation failed","message":"Genre validation failed: name: Path `name` (`jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).Genre validation failed: name: Path `name` (`jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).","name":"ValidationError","level":"error","stack":"ValidationError: Genre validation failed: name: Path `name` (`jrgersgtesgfwefwewefwqetqwegwGAREGREGQERGQERGEQRGERGERGWQ  QSQs  qsdfgdgdhdrherherherhrherherherherherherherherherherherh`) is longer than the maximum allowed length (50).\n    at new ValidationError (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/error/validation.js:30:11)\n    at model.Object.<anonymous>.Document.invalidate (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2346:32)\n    at p.doValidate.skipSchemaValidators (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/document.js:2195:17)\n    at /home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/mongoose/lib/schematype.js:1058:9\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\n    at process._tickCallback (internal/process/next_tick.js:181:9)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Joi.string(...).min(...).maxlength is not a functionJoi.string(...).min(...).maxlength is not a function","stack":"TypeError: Joi.string(...).min(...).maxlength is not a function\n    at validate (/home/piotr/Pulpit/vidly-node/node-js-vidly/models/genre.js:21:10)\n    at Object.<anonymous>.router.post (/home/piotr/Pulpit/vidly-node/node-js-vidly/routes/courses.js:26:21)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:16:5)\n    at <anonymous>"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Joi.string(...).min(...).maxlength is not a functionJoi.string(...).min(...).maxlength is not a function","stack":"TypeError: Joi.string(...).min(...).maxlength is not a function\n    at validate (/home/piotr/Pulpit/vidly-node/node-js-vidly/models/genre.js:21:10)\n    at Object.<anonymous>.router.post (/home/piotr/Pulpit/vidly-node/node-js-vidly/routes/courses.js:26:21)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:16:5)\n    at <anonymous>"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Can't set headers after they are sent.Can't set headers after they are sent.","stack":"Error: Can't set headers after they are sent.\n    at validateHeader (_http_outgoing.js:491:11)\n    at ServerResponse.setHeader (_http_outgoing.js:498:3)\n    at ServerResponse.header (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:771:10)\n    at ServerResponse.send (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/response.js:170:12)\n    at checkToken (/home/piotr/Pulpit/vidly-node/node-js-vidly/middleware/token.js:18:25)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/piotr/Pulpit/vidly-node/node-js-vidly/node_modules/express-async-errors/index.js:16:20)"}
